services:
  - type: web
    name: bug-spy
    runtime: docker
    repo: https://github.com/your-username/bug-spy.git # Replace with your repo URL
    branch: main
    rootDir: .
    dockerfilePath: ./Dockerfile
    dockerContext: .
    dockerCommand: production
    plan: standard # or starter, pro based on your needs
    region: oregon # or singapore, frankfurt, ohio
    buildCommand: echo "Docker build handles this"
    startCommand: echo "Docker CMD handles this"
    envVars:
      - key: NODE_ENV
        value: production
      - key: PUPPETEER_SKIP_CHROMIUM_DOWNLOAD
        value: true
      - key: PUPPETEER_EXECUTABLE_PATH
        value: /usr/bin/chromium
      # Add your other environment variables here as needed
      # - key: DATABASE_URL
      #   sync: false # Set in Render dashboard
      # - key: REDIS_URL  
      #   sync: false # Set in Render dashboard
    healthCheckPath: /api/v1/capture-metrics/health
    autoDeploy: true
    disk:
      name: bug-spy-disk
      mountPath: /app/screenshots
      sizeGB: 1
    scaling:
      minInstances: 1
      maxInstances: 3
      targetCPUPercent: 70
      targetMemoryPercent: 80